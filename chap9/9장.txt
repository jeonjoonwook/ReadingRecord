
9.1 자바 엔터프라이즈 플랫폼과 스프링 애플리케이션

클라이언트와 백엔드 시스템
 - 클라이언트가 웹 브라우저이고 백엔드 시스템이 DB 구성

애플리케이션 서버
 - 경량급 WAS/ 서블릿 컨테이너
     - 톰캣 같은 서블릿 컨테이너만 있어도 스프링은 잘 돌아감
 - WAS
    - 고도의 안정성이나 고성능 시스템에서 필수적인 안정적인 리소스 관리 , 레거시 시스템 연동

스프링 애플리케이션의 배포 단위
  -독립 웹 모듈
     - 스프링은 보통 war로 패키징된 독립 웹 모듈로 배포
  - 엔터프라이즈 애플리케이션
     - 확장자가 ear인 엔터프라이즈 애플리케이션으로 패키징해서 배포 , EJB 모듈을 긴밀하게 사용할때

9.3 계층형 아키텍처
 - 아키텍처와 SoC
     - 애플리케이션을 구성하는 오브젝트들을 비슷한 성격과 책임을 가진 것들끼리 묶을 수 있음
     - ex) 데이터 액세스 로직을 담당하는 DAO들은 하나의 단위 , 비즈니스 로직을 구현해 놓은 비즈니스 서비스도 마찬가지
     - 성격이 다른 것은 아키텍처 레벨에서 분리   

3계층 아키텍처와 수직 계층
 - 백엔드의 DB나 레거시 시스템과 연동하는 인터페이스 역할을 하는 데이터 액세스 계층, 비즈니스 로직을 담고 있는 서비스 계층
  , 주로 웹 기반 UI를 만들어내고 흐름을 관리하는 프레젠테이션 계층으로 구분

데이터 액세스 계층
  - DAO 코드 - JdbcTemplate - (JDBC, 트랜잭션 동기화) - DataSource

서비스 계층
  서비스 계층(POJO 서비스 코드) - 기반 서비스 계층(트랜잭션, 보안, 리모팅, 메일, 메시징, 스케줄링)

프레젠테이션 계층
 - 다양한 기술과 프레임워크의 조합을 가질 수 있음
 - 엔터프라이즈 애플리케이션의 프레젠테이션 계층은 HTTP 프로토콜을 사용하는 서블릿이 바탕이 됨

애플리케이션 정보 아키텍처
 - DB/SQL 중심의 로직 구현 방식
     데이터 중심구조의 특징은 하나의 업무 트랜잭션에 모든 계층의 코드가 종속되는 경향, 
     자바를 단지 DB와 웹 화면을 연결해주는 단순한 인터페이스 도구로 전락 
 
 - 오브젝트 중심 아키텍처
     도메인 모델을 반영하는 오브젝트 구조를 만들어두고 그것을 각 계층 사이에서 정보를 전송하는데 사용

DB/SQL 중심에서는 DAO에서 SQL을 변경하거나 필드 개수나 순서, 이름을 바꾸면 서비스 계층과 프레젠테이션 계층의 코드도 같이 변경되어야 함
즉, DAO가 만드는 SQL 결과에 모든 계층의 코드가 의존

반면 오브젝트 방식에서는 애플리케이션에서 사용되는 정보가 도메인 모델의 구조를 반영해서 만들어진 오브젝트 안에 담김
SQL이나 웹페이지의 출력 포맷 등에 종속 되지 않음

도메인 오브젝트 사용의 문제점
 -최적화된 SQL 을 매번 만들어 사용하는 경우에 비해 성능 면에서 손해 , DAO는 비즈니스 로직의 사용방식을 모르므로 도메인 오브젝트의 모든 필드값을 다 채워서 전달
 - 오브젝트 내에 드물게 사용되는 필드값이 있다면 DAO에서 도메인 오브젝트의 모든 필드 정보를 채워서 전달하는 것은 낭비

지연된 로딩 기법
 - 최소한의 오브젝트 정보만 읽어두고 관계하고 있는 오브젝트가 필요한 경우에만 다이내믹하게 DB에서 다시 읽어옴
 - RDB 매핑(ORM) 기술을 사용하는것이 가장 좋음, 이런 데이터 액세스 기술은 기본적으로 지연된 로딩 기법등을 제공 

빈약한 도메인 오브젝트 방식
 - 도메인 오브젝트에 정보만 담겨 있고, 정보를 활용하는 아무런 기능도 갖고 있지 않다면 온전한 오브젝트라고 보기 힘듬
 - 빈약한 오브젝트 방식에서는 비즈니스 로직이 서비스계층에 존재

풍성한 도메인 오브젝트 방식
 - 어떤 비즈니스 로직은 특정 도메인 오브젝트나 관련 오브젝트가 가진 정보와 깊은 관계가 있음, 이런 로직을 서비스 계층의 코드가 아니라 도메인 오브젝트에 넣어주고
서비스 계층의 비즈니스 로직에서 재사용

상태 관리와 빈 스코프
 -하나의 어플리케이션이 동시에 수많은 사용자의 요청을 처리하므로 서버의 자원이 특정 사용자에게 일정하게 할당되지 않음
 - 서버 기반의 애플리케이션은 지속적으로 유지되는 상태를 갖지 않는다(stateless)특징이 있음
 - 애플리케이션의 상태와 장시간 진행되는 작업정보는 유지 되어야 하는데 URL,파라미터, 폼 히든 필드, 쿠키 등을 이용해 상태 정보 또는 서버에 저장된 상태정보에 키 값을 전달해야 함
 - 스프링은 상태가 유지되지 않는 빈과 오브젝트 사용하는 것을 권장, 웹 클라이언트에서는 HTTP 세션 적극 활용